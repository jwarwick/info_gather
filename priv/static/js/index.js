// Generated by CoffeeScript 1.6.3
(function() {
  jQuery(function() {
    var add_parent_div, add_student_div, parent_count, parent_source, parent_template, student_count, student_source, student_template, update_parent_remove_buttons, update_parent_same_address_buttons, update_student_remove_buttons;
    student_source = $("#student-template").html();
    student_template = Handlebars.compile(student_source);
    student_count = 1;
    parent_source = $("#parent-template").html();
    parent_template = Handlebars.compile(parent_source);
    parent_count = 1;
    update_student_remove_buttons = function() {
      if ($(".student-element").length > 1) {
        return $(".remove-student-button").prop("disabled", false);
      } else {
        return $(".remove-student-button").prop("disabled", true);
      }
    };
    add_student_div = function() {
      var student_context, student_html;
      student_context = {
        count: student_count
      };
      student_count = student_count + 1;
      student_html = student_template(student_context);
      $("#student-list").append(student_html);
      return update_student_remove_buttons();
    };
    add_student_div();
    $("#add-student-button").click(function() {
      add_student_div();
      return $('html, body').animate({
        scrollTop: $("#student-list .student-element:last").offset().top
      }, 1000);
    });
    $(document).on('click', ".remove-student-button", function(event) {
      event.preventDefault();
      $(this).closest(".student-element").remove();
      return update_student_remove_buttons();
    });
    update_parent_remove_buttons = function() {
      if ($(".parent-element").length > 1) {
        return $(".remove-parent-button").prop("disabled", false);
      } else {
        return $(".remove-parent-button").prop("disabled", true);
      }
    };
    update_parent_same_address_buttons = function() {
      var checkbox;
      checkbox = $("#parent-list .parent-element:first .parent-same-address-checkbox");
      if ($(checkbox).prop("checked")) {
        $(checkbox).click();
      }
      return $(checkbox).prop("disabled", true);
    };
    add_parent_div = function() {
      var parent_context, parent_html;
      parent_context = {
        count: parent_count
      };
      parent_count = parent_count + 1;
      parent_html = parent_template(parent_context);
      $("#parent-list").append(parent_html);
      update_parent_remove_buttons();
      $("#parent-list").children().last().find(".grade-select").change();
      return update_parent_same_address_buttons();
    };
    add_parent_div();
    $("#add-parent-button").click(function() {
      add_parent_div();
      return $('html, body').animate({
        scrollTop: $("#parent-list .parent-element:last").offset().top
      }, 1000);
    });
    $(document).on('click', ".remove-parent-button", function(event) {
      event.preventDefault();
      $(this).closest(".parent-element").remove();
      update_parent_remove_buttons();
      return update_parent_same_address_buttons();
    });
    return $(document).on('change', ".parent-same-address-checkbox", function(event) {
      var address_inputs;
      address_inputs = $(this).closest(".form-group").siblings(".parent-address").find(":input");
      return $(address_inputs).prop("disabled", this.checked);
    });
  });

}).call(this);
